'use strict';





module.exports=function(Playbasis){


var http=Playbasis.http;
var helpers=Playbasis.helpers;


var apiMethod="Merchant";


var _api=Playbasis.merchantApi={};








_api.availableBranchForGoodsGroup=function(goodsGroup)
{
return http.getJsonAsync(helpers.createApiUrl(apiMethod,"availableBranchGoodsGroup")+helpers.appendAndJoinIfNotNullAsUrlParam("goods_group",goodsGroup));
};















_api.verifyCoupon=function(goodsGroup,couponCode,options)
{
var keys=["goods_group","coupon_code","pin_code","player_id"];
var dvalues=[goodsGroup,couponCode,null,null];

return http.getJsonAsync(helpers.createApiUrl(apiMethod,"goodsGroup","verify")+helpers.appendAndJoinIfNotNullAsUrlParam2(keys,dvalues,options));
};















_api.redeemCoupon=function(goodsGroup,couponCode,options)
{
var postObj={token:Playbasis.env.global.token,goods_group:goodsGroup,coupon_code:couponCode};
var optionObj=helpers.createObjectFromTarget(options,["pin_code","player_id"]);
var combinedObj=helpers.combineObjects(postObj,optionObj);

return http.postJsonAsync(helpers.createApiUrl(apiMethod,"goodsGroup","redeem"),combinedObj);
};











_api.redeemGoods=function(goodsName,playerId,options)
{
var postObj={token:Playbasis.env.global.token,goods_name:goodsName,player_id:playerId};
var optionObj=helpers.createObjectFromTarget(options,["amount"]);
var combinedObj=helpers.combineObjects(postObj,optionObj);

return http.postJsonAsync(helpers.createApiUrl(apiMethod,"goods","redeem"),combinedObj);
};
};
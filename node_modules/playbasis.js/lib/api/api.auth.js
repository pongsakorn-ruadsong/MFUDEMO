'use strict';





module.exports=function(Playbasis){


var http=Playbasis.http;
var helpers=Playbasis.helpers;


var apiMethod="Auth";


var _api=Playbasis.authApi={};







_api.auth=function()
{
return new Playbasis.Promise(function(resolve,reject){
http.postJsonAsync(helpers.createApiUrl(apiMethod),{api_key:Playbasis.env.global.apiKey,api_secret:Playbasis.env.global.apiSecret}).
then(function(result){

Playbasis.env.global.token=result.response.token;

resolve(result);
},function(e){reject(e);});
});
};







_api.renew=function()
{
return new Playbasis.Promise(function(resolve,reject){
http.postJsonAsync(helpers.createApiUrl(apiMethod+"/renew"),{api_key:Playbasis.env.global.apiKey,api_secret:Playbasis.env.global.apiSecret}).
then(function(result){

Playbasis.env.global.token=result.response.token;

resolve(result);
},function(e){reject(e);});
});
};
};
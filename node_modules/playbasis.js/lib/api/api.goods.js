'use strict';





module.exports=function(Playbasis){


var http=Playbasis.http;
var helpers=Playbasis.helpers;


var apiMethod="Goods";


var api=Playbasis.goodsApi={};





















api.goodsListInfo=function(options)
{
var keys=["player_id","active_filter","name","date_start","date_end","offset","limit","tags","custom_param","not_custom_param"];
var defaultValues=[null,null,null,null,null,null,null,null,null,null];

return http.getJsonAsync(helpers.createApiUrl(apiMethod)+helpers.appendAndJoinIfNotNullAsUrlParam2(keys,defaultValues,options));
};





















api.goodsListInfoWithSelectedFields=function(options)
{
var keys=["player_id","selected_field","active_filter","date_start","date_end","offset","limit","tags","custom_param","not_custom_param"];
var defaultValues=[null,null,null,null,null,null,null,null,null,null];

return http.getJsonAsync(helpers.createApiUrl(apiMethod,"field")+helpers.appendAndJoinIfNotNullAsUrlParam2(keys,defaultValues,options));
};













api.goodsInfo=function(goodsId,options)
{
var keys=["player_id"];
var dvalues=[null];

return http.getJsonAsync(helpers.createApiUrl(apiMethod,goodsId)+helpers.appendAndJoinIfNotNullAsUrlParam2(keys,dvalues,options));
};














api.goodsGroupAvailable=function(playerId,group,options)
{
var keys=["player_id","group","amount"];
var dvalues=[playerId,group,null];

return http.getJsonAsync(helpers.createApiUrl("Redeem","goodsGroup")+helpers.appendAndJoinIfNotNullAsUrlParam2(keys,dvalues,options));
};







api.sponsoredGoodsListInfo=function()
{
return http.getJsonAsync(helpers.createApiUrl(apiMethod,"sponsor"));
};








api.sponsoredGoodsInfo=function(goodsId)
{
return http.getJsonAsync(helpers.createApiUrl(apiMethod,"sponsor",goodsId));
};














api.sponsoredGoodsGroupAvailable=function(playerId,group,options)
{
var keys=["player_id","group","amount"];
var dvalues=[playerId,group,null];

return http.getJsonAsync(helpers.createApiUrl("Redeem","sponsorGroup")+helpers.appendAndJoinIfNotNullAsUrlParam2(keys,dvalues,options));
};














api.verifyCoupon=function(goodsId,couponCode,options)
{
var keys=["goods_id","coupon_code","player_id"];
var dvalues=[goodsId,couponCode,null];

return http.getJsonAsync(helpers.createApiUrl(apiMethod,"couponVerify")+helpers.appendAndJoinIfNotNullAsUrlParam2(keys,dvalues,options));
};










api.verifyCouponWithRedeem=function(goodsId,couponCode,playerId)
{
var postObj={token:Playbasis.env.global.token,goods_id:goodsId,coupon_code:couponCode,player_id:playerId};

return http.postJsonAsync(helpers.createApiUrl(apiMethod,"couponVerify"),postObj);
};
};
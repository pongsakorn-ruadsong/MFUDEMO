'use strict';





module.exports=function(Playbasis){


var http=Playbasis.http;
var helpers=Playbasis.helpers;


var apiMethod="Redeem";


var api=Playbasis.redeemApi={};














api.redeem=function(goodsId,playerId,options)
{
var obj={token:Playbasis.env.global.token,goods_id:goodsId,player_id:playerId};
var selectedOptionsObj=helpers.createObjectFromTarget(options,["amount"]);
var combineObj=helpers.combineObjects(obj,selectedOptionsObj);

return http.postJsonAsync(helpers.createApiUrl(apiMethod,"goods"),combineObj);
};














api.redeemGoodsGroup=function(playerId,group,options)
{
var obj={token:Playbasis.env.global.token,player_id:playerId,group:group};
var selectedOptionsObj=helpers.createObjectFromTarget(options,["amount"]);
var combineObj=helpers.combineObjects(obj,selectedOptionsObj);

return http.postJsonAsync(helpers.createApiUrl(apiMethod,"goodsGroup"),combineObj);
};










api.redeemVerify=function(goodsGroup,couponCode,pinCode)
{
var obj={token:Playbasis.env.global.token,goods_group:goodsGroup,coupon_code:couponCode,pin_code:pinCode};

return http.postJsonAsync(helpers.createApiUrl(apiMethod,"goodsGroup","verify"),obj);
};














api.redeemSponsor=function(goodsId,playerId,options)
{
var obj={token:Playbasis.env.global.token,goods_id:goodsId,player_id:playerId};
var selectedOptionsObj=helpers.createObjectFromTarget(options,["amount"]);
var combineObj=helpers.combineObjects(obj,selectedOptionsObj);

return http.postJsonAsync(helpers.createApiUrl(apiMethod,"sponsor"),combineObj);
};














api.redeemSponsoredGoodsGroup=function(playerId,group,options)
{
var obj={token:Playbasis.env.global.token,player_id:playerId,group:group};
var selectedOptionsObj=helpers.createObjectFromTarget(options,["amount"]);
var combineObj=helpers.combineObjects(obj,selectedOptionsObj);

return http.postJsonAsync(helpers.createApiUrl(apiMethod,"sponsorGroup"),combineObj);
};
};